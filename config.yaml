server:
  port: 8081
  read_timeout: 30s
  write_timeout: 30s
  shutdown_timeout: 10s
  https: false  # Set true in production for HSTS

database:
  host: localhost
  port: 6432
  name: bfc_vpn
  user: app_user
  max_open_conns: 25
  max_idle_conns: 10
  conn_max_lifetime: 30m
  statement_timeout: 25s
  ssl_mode: disable

redis:
  host: localhost
  port: 6379
  db: 0
  pool_size: 10

keycloak:
  issuer_url: "http://localhost:8080/realms/bfc-vpn"
  client_id: "bfc-vpn-api"
  # client_secret from KEYCLOAK_CLIENT_SECRET env var
  redirect_url: "http://localhost:8081/api/v1/auth/callback"
  scopes: ["openid", "profile", "email"]
  timeout_seconds: 10  # Context timeout for Keycloak calls

totp:
  issuer: "BFC-VPN"
  # encryption_key from TOTP_ENCRYPTION_KEY env var (32 bytes, base64 encoded)

logging:
  level: info
  format: json

cors:
  allowed_origins: ["http://localhost:3000"]
  allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowed_headers: ["Authorization", "Content-Type", "X-Request-ID"]
  max_age: 300

# Story 2.7: Dual Auth Failover Configuration
dual_auth:
  enabled: true
  health_check_interval_seconds: 10
  failure_threshold: 3
  recovery_threshold: 3
  max_failovers_per_hour: 3
  health_check_timeout_seconds: 5
  password_sync_interval_minutes: 5
  use_tls: false  # Set true in production
  tls_skip_verify: false
  tls_ca_cert_path: ""

# Story 2.7: Security Configuration
security:
  # internal_service_secret from INTERNAL_SERVICE_SECRET env var
  # Used for service-to-service JWT authentication
